#!/usr/bin/env bash

# Currently breaks named workspaces declared in the config.

if [[ -z "$1" ]]; then
  echo "Error: Workspace name required."
  exit 1
fi

current_workspace=$(niri msg -j workspaces | jq -r '.[] | select(.is_active == true).name')

if [[ "$current_workspace" != "$1" ]]; then
  echo -e "Setting workspace name to $1"
  niri msg action set-workspace-name "$1"
else
  echo -e "Resetting workspace name..."
  niri msg action unset-workspace-name
fi
